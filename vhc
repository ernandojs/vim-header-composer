#!/usr/bin/env bash
#
# wat if we have more than one template?

temporary=$(tempfile) || exit 1
size=0
while read -r string
do echo "${string}" >> "$temporary"
    [[  ${#string} -gt ${size} ]] && size=${#string}
done

size=$((size + 10))

function str_repeat {
    printf '%*s' "$1" | tr ' ' "$2"; echo
}

function line {
    str_repeat "$size" '#'
}

trap line \
EXIT;line

while read -r string
do  spacing=$(printf '%*s' $((size - ${#string} - 10)))
    echo "#### $string$spacing ####"
done < "$temporary"

rm "$temporary"
